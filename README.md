# ğŸŒ¿ VeganLife â€” Vegan Cross-Border E-Commerce

ãƒ´ã‚£ãƒ¼ã‚¬ãƒ³å•†å“ã«ç‰¹åŒ–ã—ãŸè¶Šå¢ƒ EC ã‚µã‚¤ãƒˆã€‚  
Shopify Hydrogenï¼ˆãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ã‚³ãƒãƒ¼ã‚¹ï¼‰ã§æ§‹ç¯‰ã—ã€Storefront APIï¼ˆGraphQLï¼‰çµŒç”±ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«å•†å“ãƒ»ã‚«ãƒ¼ãƒˆãƒ»æ±ºæ¸ˆãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã€‚  
å°†æ¥çš„ã« FastAPI + ML ã«ã‚ˆã‚‹ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‰æ©Ÿèƒ½ã‚’çµ±åˆäºˆå®šã€‚

> **Demo Store:** [hcnmdc-dc.myshopify.com](https://hcnmdc-dc.myshopify.com)

---

## ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã‚¹ã‚¿ãƒƒã‚¯

**Frontend**

- [Shopify Hydrogen](https://hydrogen.shopify.dev/) v2026.1 â€” Shopify å…¬å¼ã® React ãƒ™ãƒ¼ã‚¹ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- [React Router](https://reactrouter.com/) v7 â€” SSR + ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ Web ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- React 18 / TypeScript 5
- Tailwind CSS 4

**Backendï¼ˆShopifyï¼‰**

- Storefront APIï¼ˆGraphQLï¼‰â€” å•†å“ãƒ»ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãƒ»ã‚«ãƒ¼ãƒˆãƒ»ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
- Shopify Markets â€” å¤šé€šè²¨ãƒ»å¤šè¨€èªå¯¾å¿œå¯èƒ½ãªè¨­è¨ˆ

**Backendï¼ˆã‚«ã‚¹ã‚¿ãƒ  / è¨ˆç”»ä¸­ï¼‰**

- FastAPIï¼ˆPythonï¼‰â€” ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»AI ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‰ãƒ»å…¨æ–‡æ¤œç´¢
- scikit-learn â€” ã‚³ã‚µã‚¤ãƒ³é¡ä¼¼åº¦ãƒ™ãƒ¼ã‚¹ã®ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ³
- LangChain + LLM â€” AI ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆï¼ˆRAGï¼‰
- PostgreSQL (RDS) / ElastiCache Redis

**ã‚¤ãƒ³ãƒ•ãƒ©**

- Oxygenï¼ˆShopifyï¼‰â€” Hydrogen å°‚ç”¨ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°
- AWS ECS Fargate â€” ã‚«ã‚¹ã‚¿ãƒ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆè¨ˆç”»ä¸­ï¼‰

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Hydrogen (React Router v7)           â”‚
â”‚          TypeScript + Tailwind CSS             â”‚
â”‚            Deploy â†’ Oxygen                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ GraphQL             â”‚ REST/GraphQL
         â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Shopify         â”‚   â”‚ FastAPI (AWS)  [è¨ˆç”»ä¸­]   â”‚
â”‚ Storefront API  â”‚   â”‚                          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚ â€¢ AI ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‰            â”‚
â”‚ â€¢ Products      â”‚   â”‚   (scikit-learn)         â”‚
â”‚ â€¢ Cart          â”‚   â”‚ â€¢ ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ           â”‚
â”‚ â€¢ Checkout      â”‚   â”‚   (LangChain + LLM)     â”‚
â”‚ â€¢ Collections   â”‚   â”‚ â€¢ ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ          â”‚
â”‚ â€¢ Multi-currencyâ”‚   â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
.env (APIãƒˆãƒ¼ã‚¯ãƒ³)
  â”‚
  â–¼
server.ts
  â”‚  createStorefrontClient() â†’ Shopify ã¨ã®æ¥ç¶šã‚’ä½œæˆ
  â”‚  createCartHandler() â†’ ã‚«ãƒ¼ãƒˆç®¡ç†ã‚’ä½œæˆ
  â”‚  handleRequest(request, { storefront, cart, env })
  â”‚                              â”‚
  â”‚            context ã¨ã—ã¦ loader ã«æ¸¡ã•ã‚Œã‚‹
  â”‚                              â”‚
  â–¼                              â–¼
routes/($locale)._index.tsx
  â”‚  loader:
  â”‚    loadCriticalData() â†’ awaitï¼ˆå³åº§ã«å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ï¼‰
  â”‚    loadDeferredData() â†’ éåŒæœŸï¼ˆå¾Œã‹ã‚‰æµã—è¾¼ã‚€ãƒ‡ãƒ¼ã‚¿ï¼‰
  â”‚
  â”‚  context.storefront.query(GraphQL)
  â”‚         â”‚
  â”‚         â–¼
  â”‚    Shopify Storefront API ã« GraphQL ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
  â”‚         â”‚
  â”‚         â–¼
  â”‚    JSON ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆå•†å“ãƒ»ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç­‰ï¼‰
  â”‚
  â–¼
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ:
  useLoaderData() ã§ loader ã®çµæœã‚’å—ã‘å–ã‚Š
  <ProductItem>, <Image>, <Money> ã§ç”»é¢ã«æç”»
  â”‚
  â–¼
ãƒ–ãƒ©ã‚¦ã‚¶ã« HTML ã‚’è¿”ã™
```

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
hydrogen-storefront/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ root.tsx                              # HTML éª¨æ ¼ + å…¨ãƒšãƒ¼ã‚¸å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ entry.client.tsx                      # ãƒ–ãƒ©ã‚¦ã‚¶å´ã® React èµ·å‹•å‡¦ç†
â”‚   â”œâ”€â”€ entry.server.tsx                      # ã‚µãƒ¼ãƒãƒ¼å´ã® SSR åˆæœŸåŒ–
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Layout.tsx                        # Header + Footer
â”‚   â”‚   â”œâ”€â”€ ProductItem.tsx                   # å•†å“ã‚«ãƒ¼ãƒ‰ (<Image>, <Money>)
â”‚   â”‚   â””â”€â”€ ...                               # ãã®ä»– scaffold ç”Ÿæˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â””â”€â”€ ...                               # GraphQL ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã€ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ ($locale)._index.tsx              # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ (Hero + Featured + Recommended)
â”‚   â”‚   â”œâ”€â”€ ($locale).products.$handle.tsx    # å•†å“è©³ç´° (VariantSelector, defer)
â”‚   â”‚   â”œâ”€â”€ ($locale).collections.$handle.tsx # ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ (Pagination)
â”‚   â”‚   â”œâ”€â”€ ($locale).cart.tsx                # ã‚«ãƒ¼ãƒˆãƒšãƒ¼ã‚¸ (CartForm actions)
â”‚   â”‚   â”œâ”€â”€ ($locale).search.tsx              # æ¤œç´¢ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ ($locale).account.tsx             # ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒšãƒ¼ã‚¸
â”‚   â”‚   â””â”€â”€ ...                               # ãã®ä»– scaffold ç”Ÿæˆãƒšãƒ¼ã‚¸
â”‚   â””â”€â”€ styles/
â”‚       â””â”€â”€ tailwind.css                      # Tailwind ã‚¨ãƒ³ãƒˆãƒªãƒ¼
â”œâ”€â”€ server.ts                                 # å…¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å…¥å£ï¼ˆstorefront, cart ä½œæˆï¼‰
â”œâ”€â”€ vite.config.ts                            # Vite + Hydrogen/Oxygen ãƒ—ãƒ©ã‚°ã‚¤ãƒ³
â”œâ”€â”€ tailwind.config.ts                        # Tailwind è¨­å®š
â”œâ”€â”€ env.d.ts                                  # ç’°å¢ƒå¤‰æ•°ãƒ»context ã®å‹å®šç¾©
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ package.json
â”œâ”€â”€ storefrontapi.generated.d.ts              # GraphQL å‹å®šç¾©ï¼ˆcodegen ã§è‡ªå‹•ç”Ÿæˆï¼‰
â””â”€â”€ .env                                      # Shopify API èªè¨¼æƒ…å ± (gitignore)
```

**ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¦å‰‡:** ãƒ•ã‚¡ã‚¤ãƒ«åãŒãã®ã¾ã¾ URL ã«ãªã‚‹ã€‚`$handle` ã¯å‹•çš„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€`($locale)` ã¯å¤šè¨€èªå¯¾å¿œç”¨ã®çœç•¥å¯èƒ½ãªãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã€‚

| ãƒ•ã‚¡ã‚¤ãƒ«å | URL ä¾‹ |
|---|---|
| `($locale)._index.tsx` | `/` or `/ja` |
| `($locale).products.$handle.tsx` | `/products/vegan-cheesecake` |
| `($locale).collections.$handle.tsx` | `/collections/snacks` |
| `($locale).cart.tsx` | `/cart` |

---

## Hydrogen å›ºæœ‰ã®æ©Ÿèƒ½

| æ©Ÿèƒ½ | ä½¿ç”¨ç®‡æ‰€ | èª¬æ˜ |
|------|----------|------|
| `createStorefrontClient()` | server.ts | Shopify API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½œæˆï¼ˆèªè¨¼ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥å†…è”µï¼‰ |
| `context.storefront.query()` | å…¨ route loader | Storefront API ã¸ GraphQL ã‚¯ã‚¨ãƒªé€ä¿¡ |
| `<Image>` | ProductItem | Shopify CDN ç”»åƒæœ€é©åŒ–ï¼ˆsrcSet, lazy loadingï¼‰ |
| `<Money>` | ProductItem, Cart | å¤šé€šè²¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆShopify Markets å¯¾å¿œï¼‰ |
| `<CartForm>` | Cart | ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ Cart mutationï¼ˆè¿½åŠ /æ›´æ–°/å‰Šé™¤ï¼‰ |
| `<VariantSelector>` | ProductDetail | URL ãƒ™ãƒ¼ã‚¹ã®ãƒãƒªã‚¢ãƒ³ãƒˆé¸æŠãƒ»åŒæœŸ |
| `<Pagination>` | Collections | ã‚«ãƒ¼ã‚½ãƒ«ãƒ™ãƒ¼ã‚¹ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ |
| `<Suspense>` + `<Await>` | ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ | ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚° SSRï¼ˆCritical/Deferred ã®2æ®µæ§‹æˆï¼‰ |
| `getSeoMeta()` | å…¨ãƒšãƒ¼ã‚¸ | SEO ãƒ¡ã‚¿ã‚¿ã‚°è‡ªå‹•ç”Ÿæˆ |
| `<Analytics.Provider>` | root.tsx | Shopify Analytics çµ±åˆ |

---

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶

- Node.js >= 18
- Shopify ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ + é–‹ç™ºã‚¹ãƒˆã‚¢
- npm or yarn

### æ‰‹é †

```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/hiwa-tech-1223/veganlife-hydrogen.git
cd veganlife-hydrogen

# 2. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# 3. Shopify ã‚¹ãƒˆã‚¢ã¨é€£æº
npx shopify hydrogen link

# 4. ç’°å¢ƒå¤‰æ•°ã‚’è‡ªå‹•å–å¾—
npx shopify hydrogen env pull

# 5. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:3000` ã‚’é–‹ã„ã¦å‹•ä½œç¢ºèªã€‚

### ç’°å¢ƒå¤‰æ•°

`.env` ã«ä»¥ä¸‹ãŒè¨­å®šã•ã‚Œã¾ã™ï¼ˆ`env pull` ã§è‡ªå‹•å–å¾—ï¼‰ï¼š

```env
SESSION_SECRET="..."
PUBLIC_STOREFRONT_API_TOKEN="..."
PRIVATE_STOREFRONT_API_TOKEN="..."
PUBLIC_STORE_DOMAIN="your-store.myshopify.com"
PUBLIC_STOREFRONT_ID="..."
```

---

## ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# Oxygen (Shopify) ã«ãƒ‡ãƒ—ãƒ­ã‚¤
npx shopify hydrogen deploy
```

---

## npm scripts

| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ |
|---------|------|
| `npm run dev` | é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆã‚³ãƒ¼ãƒ‰ç”Ÿæˆä»˜ãï¼‰ |
| `npm run build` | ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰ |
| `npm run preview` | ãƒ“ãƒ«ãƒ‰å¾Œã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ |
| `npm run codegen` | GraphQL å‹å®šç¾©ã®ç”Ÿæˆ |
| `npm run typecheck` | TypeScript å‹ãƒã‚§ãƒƒã‚¯ |

---

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT
